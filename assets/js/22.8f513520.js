(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{427:function(a,t,e){"use strict";e.r(t);var s=e(21),o=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"浏览器存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器存储"}},[a._v("#")]),a._v(" 浏览器存储")]),a._v(" "),e("h2",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[a._v("#")]),a._v(" Cookie")]),a._v(" "),e("blockquote",[e("p",[a._v("非本地存储，而是“维持状态”"),e("br"),a._v("\n存储在浏览器里的一个小小的文本文件，它附着在 HTTP 请求上"),e("br"),a._v("\nhttp是一个无状态协议，Cookie携带用户信息，当服务器检查 Cookie 的时候，便可以获取到客户端的状态")])]),a._v(" "),e("p",[a._v("缺点:")]),a._v(" "),e("ol",[e("li",[a._v("Cookie 不够大，4kb")]),a._v(" "),e("li",[a._v("过量的 Cookie 会带来巨大的性能浪费\n"),e("ol",[e("li",[a._v("Cookie 是紧跟域名的，通过响应头里的 Set-Cookie 指定要存储的 Cookie 值。domain 被设置为设置 Cookie 页面的主机名，我们也可以手动设置 domain 的值"),e("code",[a._v("Set-Cookie: name=xiuyan; domain=xiuyan.me")])]),a._v(" "),e("li",[a._v("同一个域名下的所有请求，都会携带 Cookie。")])])]),a._v(" "),e("li",[a._v("只能储存字符串，JavaScript中去处理cookie是一件很繁琐的事")]),a._v(" "),e("li",[a._v("不安全：储在Cookie的任何数据可以被他人访问")])]),a._v(" "),e("h2",{attrs:{id:"cookie-生成方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-生成方式"}},[a._v("#")]),a._v(" cookie 生成方式")]),a._v(" "),e("ol",[e("li",[a._v("http response header中的set-cookie："),e("code",[a._v("Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2018 07:28:00 GMT;//可以指定一个特定的过期时间（Expires）或有效期（Max-Age）")])]),a._v(" "),e("li",[a._v("js中可以通过document.cookie可以读写cookie，以键值对的形式展示："),e("code",[a._v("document.cookie='age=20;domain=.baidu.com'")]),a._v("，所有以.baidu.com结尾的域名都可以访问该cookie，其它域名则不行。")])]),a._v(" "),e("h2",{attrs:{id:"cookie-注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-注意"}},[a._v("#")]),a._v(" cookie 注意")]),a._v(" "),e("ol",[e("li",[a._v("各浏览器的cookie每一个name=value的value值大概在4k，所以4k并不是一个域名下所有的cookie共享的,而是一个name的大小。")]),a._v(" "),e("li",[a._v("同一个域名下的所有请求，都会携带 Cookie，静态资源没必要携带，可以通过cdn（存储静态文件的）的域名和主站的域名分开来解决")])]),a._v(" "),e("h2",{attrs:{id:"cookie-安全"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-安全"}},[a._v("#")]),a._v(" cookie 安全")]),a._v(" "),e("p",[a._v("HttpOnly 不支持读写，浏览器不允许脚本操作document.cookie去更改cookie，\n所以为避免跨域脚本 (XSS) 攻击，通过JavaScript的 Document.cookie API无法访问带有 HttpOnly 标记的Cookie，它们只应该发送给服务端。如果包含服务端 Session 信息的 Cookie 不想被客户端 JavaScript 脚本调用，那么就应该为其设置 HttpOnly 标记")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"web-storage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-storage"}},[a._v("#")]),a._v(" Web Storage")]),a._v(" "),e("blockquote",[e("p",[a._v("HTML5 专门为浏览器存储而提供的数据存储机制")])]),a._v(" "),e("h2",{attrs:{id:"local-storage-与-session-storage-的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#local-storage-与-session-storage-的区别"}},[a._v("#")]),a._v(" Local Storage 与 Session Storage 的区别")]),a._v(" "),e("ol",[e("li",[a._v("生命周期：Local Storage 是持久化的本地存储，存储在其中的数据是永远不会过期的，使其消失的唯一办法是手动删除；而 Session Storage 是临时性的本地存储，它是会话级别的存储，当会话结束（页面被关闭）时，存储内容也随之被释放。")]),a._v(" "),e("li",[a._v("作用域：Local Storage、Session Storage 和 Cookie 都遵循同源策略。但 Session Storage 特别的一点在于，即便是相同域名下的两个页面，只要它们不在同一个浏览器窗口中打开，那么它们的 Session Storage 内容便无法共享。")])]),a._v(" "),e("h2",{attrs:{id:"特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[a._v("#")]),a._v(" 特点")]),a._v(" "),e("ol",[e("li",[a._v("存储容量大： Web Storage 根据浏览器的不同，存储容量可以达到 5-10M 之间。")]),a._v(" "),e("li",[a._v("仅位于浏览器端，不与服务端发生通信。")]),a._v(" "),e("li",[a._v("js操作简单")])]),a._v(" "),e("h2",{attrs:{id:"常用方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用方法"}},[a._v("#")]),a._v(" 常用方法")]),a._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[a._v("localStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("setItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'user_name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'xiuyan'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("getItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'user_name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("removeItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'user_name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("clear")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h2",{attrs:{id:"场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[a._v("#")]),a._v(" 场景")]),a._v(" "),e("p",[a._v("如： Local Storage 存储Base64 格式的图片字符串")]),a._v(" "),e("h2",{attrs:{id:"indexeddb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#indexeddb"}},[a._v("#")]),a._v(" IndexedDB")]),a._v(" "),e("blockquote",[e("p",[a._v("运行在浏览器上的非关系型数据库")])]),a._v(" "),e("p",[a._v("IndexedDB 可以看做是 LocalStorage 的一个升级，当数据的复杂度和规模上升到了 LocalStorage 无法解决的程度，我们毫无疑问可以请出 IndexedDB 来帮忙。"),e("br"),a._v("\n几乎所有浏览器都对 indexedDB 有了不错的支持")])])}),[],!1,null,null,null);t.default=o.exports}}]);